{% extends 'layout.html.twig' %}
{% block content %}

    {% if(session.user.is_admin) %}

<div class="container rounded text-ternary mt-4 mb-5">
    <div class="my-5">
            <form method="POST" class="d-flex justify-content-center">
                <input type="url" id="url" name="url" class="w-75 h-50 h-auto" placeholder="URL d'une image"/>
                <button class="row text-primary btn bg-secondary btn-block m-3 fs-4 "> Envoyer une image fun</button>
            </form>
    </div>
    <div class="row">
        <div class="col ">
            <h4 class="text-right text-secondary border-bottom mt-3 fs-2">Modérer les images<i class="offset-1 fas fa-image"></i></h4>
                <ul class="list-group d-flex justify-content-center">
                     {% for picture in pictures %}
                    <li class="list-group-item col-12 mx-auto my-1 rounded-3">
                        <div class="d-flex flex-row justify-content-between align-items-start">
                                <a href="{{ picture.url}}">
                                    <img class=" col-10 w-25 rounded d-flex justify-content-center text-center" src="{{ picture.url }}" alt="meme">
                                </a>
                            <p class="fs-5 col-3">Posté par {{ picture.name }}</p>
                        </div>
                        <div class="d-flex flex-row justify-content-between">
                            <form action="admin/updatePicture" method="POST" class="col-11">
                                <input type="hidden" name="idPicture" value="{{ picture.id }}">
                                <input type="text" class="col-9" name="url" value="{{ picture.url}}">
                                <button class="m-2 border-0"><i class="far fa-edit"></i></button>
                            </form>
                            <form action="/admin/deletePicture" method="POST" onsubmit="return confirm('T es vraiment chaud pour supprimer ?')">
                                <input type="hidden" name="delete" value="{{ picture.id }}">
                                <button class="m-2 border-0"><i class="far fa-trash-alt"></i></button>
                            </form>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
        </div>
        <div class="col">
            <h4 class="text-right text-secondary border-bottom mt-3 fs-2">Modérer les légendes <i class="offset-1 fas fa-comments"></i></h4>
                <ul class="col list-group d-flex justify-content-center">
                    {% for legendManager in legendManager %}
                     <li class="list-group-item col-12 x-auto my-1 rounded-3">
                         <div class="d-flex flex-row justify-content-between align-items-start">
                             <a class="text-primary fs-3 col-9" href="/image?id={{ legendManager.picture_id }}">{{ legendManager.content }}</a>
                             <p class="fs-5 col-3">Posté par {{ legendManager.name }}</p>
                         </div>
                         <div class="d-flex flex-row justify-content-between">
                             <form action="admin/update" method="POST" class="col-11">
                                 <input type="hidden" name="idLegend" value="{{ legendManager.id }}">
                                 <input type="text" class="col-9" name="content" value="{{ legendManager.content }}">
                                 <button class="m-2 border-0"><i class="far fa-edit"></i></button>
                             </form>
                             <form action="/admin/delete" method="POST" onsubmit="return confirm('T es vraiment chaud pour supprimer ?')">
                                 <input type="hidden" name="delete" value="{{ legendManager.id }}">
                                 <button class="m-2 border-0"><i class="far fa-trash-alt"></i></button>
                             </form>
                         </div>
                    </li>
                {% endfor %}
                 </ul>
        </div>
    </div>
</div>
    {% else %}
        <div class="container d-flex justify-content-center my-5">
                <p class="d-flex justify-content-center text-secondary fs-3 col-9">Merci de vous connecter en tant qu'administrateur.</p>
        </div>
    {% endif %}
{% endblock %}